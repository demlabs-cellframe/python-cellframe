# üîå SLC Agent API Server - –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –§–∞–∑—ã 1

## üìã –û–±–∑–æ—Ä

**–î–∞—Ç–∞:** 24 –∏—é–Ω—è 2025  
**–§–∞–∑–∞:** 1 - –ë–∞–∑–æ–≤—ã–π HTTP —Å–µ—Ä–≤–µ—Ä  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2 —á–∞—Å–∞  

## üéØ –¶–µ–ª–∏ –§–∞–∑—ã 1

- [x] –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ WebInterfaceServer –∫–ª–∞—Å—Å–∞
- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –±–∞–∑–æ–≤—ã–º–∏ endpoints
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- [x] –°–æ–∑–¥–∞–Ω–∏–µ Pydantic –º–æ–¥–µ–ª–µ–π –¥–ª—è API
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Agent –∫–ª–∞—Å—Å –∏ lifecycle
- [x] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ agent_config.yaml

## üèóÔ∏è –°–æ–∑–¥–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **WebInterfaceServer** (`src/api/web_interface_server.py`)
   - FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
   - CORS middleware –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
   - Gzip —Å–∂–∞—Ç–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
   - Graceful shutdown –∏ error handling

2. **WebSocketManager** (`src/api/websocket_manager.py`)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
   - –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ ping/pong
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

3. **EventManager** (`src/api/events.py`)
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ (5—Å) –∏ –º–µ—Ç—Ä–∏–∫ (10—Å)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∞–≥–µ–Ω—Ç–∞
   - Real-time —Ä–∞—Å—Å—ã–ª–∫–∞ —Å–æ–±—ã—Ç–∏–π
   - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è AI Manager, Context Manager, SSH

4. **Pydantic Models** (`src/api/models.py`)
   - 15+ response –º–æ–¥–µ–ª–µ–π (AgentStatus, SystemMetrics, ChatMessage, etc.)
   - 5+ request –º–æ–¥–µ–ª–µ–π –¥–ª—è API endpoints
   - 7+ WebSocket event –º–æ–¥–µ–ª–µ–π
   - –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

## üîå API Endpoints (–§–∞–∑–∞ 1)

### –ë–∞–∑–æ–≤—ã–µ endpoints
- `GET /api/health` - Health check
- `GET /api/status` - –°—Ç–∞—Ç—É—Å –∞–≥–µ–Ω—Ç–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `GET /api/metrics` - –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫)
- `WS /ws` - WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### WebSocket –°–æ–±—ã—Ç–∏—è
- `agent_status` - –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞–≥–µ–Ω—Ç–∞ (–∫–∞–∂–¥—ã–µ 5—Å)
- `system_metrics` - –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–∫–∞–∂–¥—ã–µ 10—Å)
- `ping/pong` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–∫–∞–∂–¥—ã–µ 30—Å)
- –ü–æ–¥–ø–∏—Å–∫–∞/–æ—Ç–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `web_interface` –≤ `agent_config.yaml`:

```yaml
web_interface:
  enabled: true
  host: localhost
  port: 8000
  cors_origins:
    - http://localhost:3000
    - http://localhost:5173
  websocket_enabled: true
  max_connections: 100
  log_requests: true
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–æ–º

### BaseAgent
- –î–æ–±–∞–≤–ª–µ–Ω `web_interface_server` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –£—Å–ª–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ `enabled: true`
- Graceful handling –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### AgentLifecycleManager
- –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ Telegram Bot
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ MCP Manager
- Error handling –∏ fallback

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `requirements.txt`:
- `fastapi>=0.104.0` - –û—Å–Ω–æ–≤–Ω–æ–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `uvicorn[standard]>=0.24.0` - ASGI —Å–µ—Ä–≤–µ—Ä
- `python-jose[cryptography]>=3.3.0` - JWT —Ç–æ–∫–µ–Ω—ã (–¥–ª—è –±—É–¥—É—â–µ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- `python-multipart>=0.0.6` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multipart —Ñ–æ—Ä–º

## üß™ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- HTTP —Å–µ—Ä–≤–µ—Ä –Ω–∞ FastAPI —Å –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–¥–ø–∏—Å–æ–∫
- Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∏ –º–µ—Ç—Ä–∏–∫
- CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- Gzip —Å–∂–∞—Ç–∏–µ –∏ request logging
- Graceful startup/shutdown
- –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å Pydantic
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ lifecycle –∞–≥–µ–Ω—Ç–∞

### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞–≥–µ–Ω—Ç–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- Ping/pong –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/api/web_interface_server.py` - 280 —Å—Ç—Ä–æ–∫
- `src/api/websocket_manager.py` - 320 —Å—Ç—Ä–æ–∫  
- `src/api/events.py` - 250 —Å—Ç—Ä–æ–∫
- `src/api/models.py` - 400 —Å—Ç—Ä–æ–∫
- –û–±–Ω–æ–≤–ª–µ–Ω–æ 3 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞

**–í—Å–µ–≥–æ:** ~1250 —Å—Ç—Ä–æ–∫ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (Server/WebSocket/Events)
- –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –¥–ª—è API
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ YAML

## üîÆ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –§–∞–∑–µ 2

–§–∞–∑–∞ 1 —Å–æ–∑–¥–∞–ª–∞ –ø—Ä–æ—á–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –§–∞–∑—ã 2:

### –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ HTTP —Å–µ—Ä–≤–µ—Ä —Å FastAPI
- ‚úÖ WebSocket –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ Event —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–æ–º

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–§–∞–∑–∞ 2)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ chat endpoints
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI Manager
- Endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–∑–Ω–∞–Ω–∏—è–º–∏
- –õ–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ API
- Context management endpoints

## üöÄ –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫
–í–µ–±-—Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –∞–≥–µ–Ω—Ç–æ–º –ø—Ä–∏ `web_interface.enabled: true`

### –î–æ—Å—Ç—É–ø –∫ API
- **API:** http://localhost:8000/api/
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:8000/api/docs
- **WebSocket:** ws://localhost:8000/ws

### Health Check
```bash
curl http://localhost:8000/api/health
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–§–∞–∑–∞ 1 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞ HTTP API —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è SLC Agent:

- üåê **FastAPI —Å–µ—Ä–≤–µ—Ä** —Å –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- üîå **WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π  
- üì° **Event —Å–∏—Å—Ç–µ–º–∞** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∞–≥–µ–Ω—Ç–æ–º
- üéØ **–¢–∏–ø–∏–∑–∞—Ü–∏—è API** —Å Pydantic –º–æ–¥–µ–ª—è–º–∏
- ‚öôÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å** —á–µ—Ä–µ–∑ YAML
- üîó **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –≤ lifecycle –∞–≥–µ–Ω—Ç–∞

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é –≤ –§–∞–∑–µ 2 –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö API endpoints –∏ –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º! 